import { Plus, Edit2 } from '../icons';
import { getIconComponent } from '../iconMap';

/**
 * PageNavigation - Navigation component for switching between pages
 * 
 * @param {Object} props
 * @param {Array} props.pages - Array of page objects with id, label, icon
 * @param {Object} props.pageSettings - Settings for each page (label, icon, hidden)
 * @param {string} props.activePage - Currently active page ID
 * @param {Function} props.setActivePage - Function to change active page
 * @param {boolean} props.editMode - Whether edit mode is active
 * @param {Function} props.setEditingPage - Function to open page edit modal
 * @param {Function} props.setShowAddPageModal - Function to open add page modal
 * @param {Function} props.t - Translation function
 */
export default function PageNavigation({
  pages,
  pageSettings,
  activePage,
  setActivePage,
  editMode,
  setEditingPage,
  setShowAddPageModal,
  t
}) {
  return (
    <div className="flex items-center gap-4 overflow-x-auto pb-2 scrollbar-hide flex-1 min-w-0">
      {pages.map(page => {
        const settings = pageSettings[page.id] || {};
        const label = settings.label || page.label;
        const isHidden = settings.hidden;
        const Icon = settings.icon ? (getIconComponent(settings.icon) || page.icon) : page.icon;
        
        if (!editMode && isHidden) return null;
        
        return (
          <button
            key={page.id}
            onClick={() => editMode ? setEditingPage(page.id) : setActivePage(page.id)}
            className={`flex items-center gap-1.5 sm:gap-2 px-4 sm:px-5 py-2 sm:py-2.5 rounded-2xl sm:rounded-full transition-all font-bold uppercase tracking-widest text-[10px] sm:text-xs whitespace-nowrap border ${
              activePage === page.id 
                ? 'bg-[var(--glass-bg-hover)] text-[var(--text-primary)] border-[var(--glass-border)]' 
                : 'bg-[var(--glass-bg)] text-[var(--text-secondary)] border-transparent hover:bg-[var(--glass-bg-hover)] hover:text-[var(--text-primary)]'
            } ${editMode && isHidden ? 'opacity-50 border-gray-500 scale-95' : ''}`}
          >
            <Icon className={`w-4 h-4 ${editMode && isHidden ? 'animate-pulse' : ''}`} />
            <span className="hidden sm:inline">{label}</span>
            {editMode && <Edit2 className="w-4 h-4 ml-1 text-blue-400 hidden sm:inline" />}
          </button>
        );
      })}
      
      {editMode && (
        <button
          onClick={() => setShowAddPageModal(true)}
          className="flex items-center gap-1.5 px-3 py-1 rounded-2xl sm:rounded-full font-bold uppercase tracking-[0.2em] text-[10px] whitespace-nowrap border-2 bg-white/5 text-white border-white/20 hover:bg-white/10 hover:border-white/30 transition-all"
        >
          <Plus className="w-3 h-3" />
          <span className="hidden sm:inline">{t('nav.addPage')}</span>
        </button>
      )}
    </div>
  );
}
